数据于处理主要包括两部分，t2vec的数据的预处理和od_prediction的预处理
## t2vec的数据的预处理
1、merge_data.jl用于将数据集合到一个数据集中，因为王超老师的数据是单独每天的，将每天的数据集集合成一个月。

2、preprocess.jl用于将原来的数据集处理到t2vec需要的输入数据，相较于源代码。增加一部分用于保留测试时的输入和相应的轨迹索引。

注：
porto2h5.jl: 是t2vec代码中本来就有的，主要针对波尔图的数据集（csv格式），所以需要将其转化为.h5文件。


## t2vec的训练：
需要注意两个参数：
* "-mode"这个是表示是训练模型还是进行t2vec
* "-vocab_size"需要进行调整，需要于划分的网格数量相同，preprocess.jl代码会返回划分的网格数量。
* 训练阶段使用：t2vec_train.py
* 推理阶段使用：t2vec.py


## od_prediction的预处理：
1、h5_2_csv.py用于将王超老师给的数据集，转化为csv文件。为了更高的读取效率，将csv文件保存为了feather文件。（不知道为啥直接处理为pd
数据直接保存为feather文件很慢).

2、preprocess_2023.09.03.py用于得到od_prediction的预处理数据。(在文献中，如果是在pycharm中，可以调整到"视图->科学模式",
逐步进行数据处理)

其中主要包括5部分：
* 将原来的数据与得到的车辆数据进行合并，其中需要的数据有，每个轨迹的ID、轨迹的特征。
* 处理时间数据，将秒转变成指定的时间间隔。并根据经纬度对起点和终点进行网格划分。
* 处理得到OD数据，并对OD数据进行整理，得到最大N个OD对。
* 按照筛选得到的OD对，整理得到OD值和对应的轨迹特征。
* 整理得到输入数据

其中需要更改的数据包括:
1、其中主要的参数为
```python
MIN_LONGITUDE = 120.1088
MAX_LONGITUDE = 120.1922
MIN_LATITUDE = 30.2335
MAX_LATITUDE = 30.3015
R_NUM = 10
C_NUM = 10
hour_num = 0.25
node_num = 1000
```
更改前4个参数更改范围，可以更改区域范围。

如果更改R_NUM和C_NUM可以得到不同的划分网格数目。

hour_num示得划分的时间间隔，但是后期会将它们聚合为一个小时的间隔，从而获得时间间隔为一个小时的数据，并达到数据增广的效果。

node_num表示得到的节点数目